//******************************************************************************

#include <stdio.h>
#include <assert.h>

#include "puzzle.h"

//******************************************************************************

void check(const char *str, Count cnt)
{
  Position positions[LENGTH];
  str2pos(str, positions);

//   trace(positions);
//   trace2(positions);

  Count bnd = bound(positions, MAXMOVES);
  assert(bnd == cnt);
  if (cnt)
  {
    Count nil = bound(positions, cnt - 1);
    assert(nil == NIL);
  }
}

//******************************************************************************

int main(int ac, char *av[])
{
  // 01 02 03 04
  // 05 06 07 08
  // 09 10 11 12
  // 13 14 15 --
  {
    const char *str = "01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 --";
    check(str, 0);
  }

  // -- 11 09 13
  // 12 15 10 14
  // 03 07 06 02
  // 04 08 05 01
  {
    const char *str = "-- 11 09 13 12 15 10 14 03 07 06 02 04 08 05 01";
    check(str, 68);
  }

  // 01 02 03 04
  // 05 06 07 08
  // 13 -- 09 10
  // 14 15 12 11
  {
    const char *str = "01 02 03 04 05 06 07 08 13 -- 09 10 14 15 12 11";
    check(str, 11);
  }

  // 01 02 11 07
  // 05 06 -- 03
  // 09 10 15 04
  // 13 14 12 08
  {
    const char *str = "01 02 11 07 05 06 -- 03 09 10 15 04 13 14 12 08";
    check(str, 13);
  }
  
  // 03 04 02 05
  // 06 10 12 13
  // 11 -- 07 08
  // 14 01 15 09
  {
    const char *str = "03 04 02 05 06 10 12 13 11 -- 07 08 14 01 15 09";
    check(str, 45);
  }

  // 03 04 02 05
  // 06 10 12 13
  // 11 01 07 08
  // 14 -- 15 09
  {
    const char *str = "03 04 02 05 06 10 12 13 11 01 07 08 14 -- 15 09";
    check(str, 44);
  }

  printf("%s: ok\n", *av);
  return 0;
}

//******************************************************************************
